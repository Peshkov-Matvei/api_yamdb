# Проект  **YaMDb**

Проект  **YaMDb**  собирает  **отзывы**  (Review) пользователей на  **произведения**  (Titles). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список  **категорий**  (Category) может быть расширен администратором.

Сами произведения в  **YaMDb**  не хранятся.

В каждой категории есть  **произведения**. 

Произведению может быть присвоен  **жанр**  из списка предустановленных. Новые жанры может создавать только администратор.

Пользователи оставляют к произведениям текстовые  **отзывы**  и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения —  **рейтинг**  (целое число). На одно произведение пользователь может оставить только один отзыв.

## Алгоритм регистрации пользователей

1.  Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами `email` и `username` на эндпоинт `/api/v1/auth/signup/`.
2.  **YaMDB** отправляет письмо с кодом подтверждения (`confirmation_code`) на адрес `email`.
3.  Пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`, в ответе на запрос ему приходит `token` (JWT-токен).
4.  При желании пользователь отправляет PATCH-запрос на эндпоинт `/api/v1/users/me/` и заполняет поля в своём профайле (описание полей — в документации).

### Пользовательские роли

-   **Аноним**  — может просматривать описания произведений, читать отзывы и комментарии.
-   **Аутентифицированный пользователь (**`user`**)**  — может читать всё, как и  **Аноним**, может публиковать отзывы и ставить оценки произведениям, может комментировать отзывы; может редактировать и удалять свои отзывы и комментарии, редактировать свои оценки произведений. Эта роль присваивается по умолчанию каждому новому пользователю.
-   **Модератор (**`moderator`**)**  — те же права, что и у  **Аутентифицированного пользователя**, плюс право удалять и редактировать  **любые**  отзывы и комментарии.
-   **Администратор (**`admin`**)**  — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
-   **Суперюзер Django**  должен всегда обладать правами администратора, пользователя с правами  `admin`. Даже если изменить пользовательскую роль суперюзера — это не лишит его прав администратора. Суперюзер — всегда администратор, но администратор — не обязательно суперюзер.

### Создание пользователя администратором

Пользователя может создать администратор — через админ-зону сайта или через POST-запрос на специальный эндпоинт  `api/v1/users/`  (описание полей запроса для этого случая — в документации). В этот момент письмо с кодом подтверждения пользователю отправлять не нужно.

После этого пользователь должен самостоятельно отправить свой  `email` и `username`  на эндпоинт  `/api/v1/auth/signup/`  , в ответ ему должно прийти письмо с кодом подтверждения.

Далее пользователь отправляет POST-запрос с параметрами `username` и `confirmation_code` на эндпоинт `/api/v1/auth/token/`, в ответе на запрос ему приходит `token` (JWT-токен), как и при самостоятельной регистрации.

### Ресурсы API  **YaMDb**

-   Ресурс  **auth:**  аутентификация.
-   Ресурс  **users:**  пользователи.
-   Ресурс  **titles:**  произведения, к которым пишут отзывы (определённый фильм, книга или песенка).
-   Ресурс  **categories:**  категории (типы) произведений («Фильмы», «Книги», «Музыка»).
-   Ресурс  **genres**: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
-   Ресурс  **reviews:**  отзывы на произведения. Отзыв привязан к определённому произведению.
-   Ресурс  **comments:**  комментарии к отзывам. Комментарий привязан к определённому отзыву.

Каждый ресурс более подробно описан в документации по адресу http://127.0.0.1:8000/redoc/ 
Указаны эндпоинты (адреса, по которым можно сделать запрос), разрешённые типы запросов, права доступа и дополнительные параметры.

### Используемые технологии    

 - Python       
 - Django REST framework
 - Git
 - SQLite3
 - Simple JWT

### Установка проекта

Cоздать и активировать виртуальное окружение:


    python -m venv env

    source env/Scripts/activate
    
    python -m pip install --upgrade pip

Установить зависимости из файла requirements.txt:

    pip install -r requirements.txt

Перейти в основную папку:

    cd api_yamdb

Подготовить и выполнить миграции:

    python manage.py makemigrations
    python manage.py migrate

Загрузить тестовые данные (при необходимости):

    python load_csv.py

Запустить проект:

    python manage.py runserver


## Состав команды разработчиков и их зоны ответственности

-   **Первый разработчик** - Заборовский Денис (https://github.com/zrivkoren).  Вся часть, касающаяся управления пользователями (*Auth*  и  *Users*): система регистрации и аутентификации, права доступа, работа с токеном, система подтверждения через e-mail.
-   **Второй разработчик** - Пешков Матвей (https://github.com/Peshkov-Matvei). Реализовал категории (*Categories*), жанры (***Genres***) и произведения (*Titles*): модели, представления и эндпоинты для них.
-   **Третий разработчик** - Гуменников Владимир (https://github.com/vovainfo) Реализовал механизм отзывов (*Review*) и комментариев (*Comments*): описал модели, представления, настроил эндпоинты, определил права доступа для запросов, а также сделал рейтинги произведений.



